# text-data
using System; using System.Collections.Generic; 
using System.Linq; using System.Web; using System.Web.UI; using System.Web.UI.WebControls;  public partial class _Default : Page {      List&lt;DateTime> dtSelection = new List&lt;DateTime>();     DateTime dtCurrentDate = new DateTime();      protected void Page_Load(object sender, EventArgs e)     {         if (!IsPostBack)         {             //DateTime StartDate = new DateTime(2015, 4, 1);             //DateTime EndDate = new DateTime(2015, 10, 31);              //int WeekDayNo = 1; // first second              //string WeekdayName = "Friday";             //int every_nthMonth = 2;             //int nthDay = 0;              //DateTime dtCurrentDate = new DateTime();             //dtCurrentDate = StartDate;              //while (dtCurrentDate &lt;= EndDate)             //{              //    nthDay = ((Convert.ToInt16(dtCurrentDate.Day) % 7) == 0 ?  (Convert.ToInt16(dtCurrentDate.Day) / 7) :  (Convert.ToInt16(dtCurrentDate.Day) / 7) + 1);              //    if (dtCurrentDate.ToString("dddd") == WeekdayName &amp;&amp;  nthDay == WeekDayNo)             //    {              //        Response.Write(dtCurrentDate.DayOfWeek);             //        Response.Write(dtCurrentDate.Day);             //        Response.Write(dtCurrentDate + " " + "&lt;/br>");              //        if (every_nthMonth == 2)             //        {             //            dtCurrentDate = dtCurrentDate.AddMonths(2);             //        }             //        if (every_nthMonth == 3)             //        {             //            dtCurrentDate = dtCurrentDate.AddMonths(2);             //        }             //    }             //    dtCurrentDate = dtCurrentDate.AddDays(1);             //}         }     }        protected void btnSubmit_Click(object sender, EventArgs e)     {         bool val = true;         if (txtStartDate.Text == "" || txtStartDate.Text == "")         {             Response.Write("Enter dates");             val = false;         }         else if (Convert.ToDateTime(txtStartDate.Text) >  Convert.ToDateTime(txtEndDate.Text))         {             Response.Write("End date should be greater than start date.");             val = false;         }         else         {              calSelected.SelectedDates.Clear();             DateTime StartDate = Convert.ToDateTime(txtStartDate.Text);             DateTime EndDate = Convert.ToDateTime(txtEndDate.Text);              dtCurrentDate = new DateTime();             dtCurrentDate = StartDate;               if (rdoRepeat.Checked &amp;&amp; val)             {                   string Repeat = drpRepeat.SelectedValue;                 string RepeatTime = drpRepeatTime.SelectedValue;                    dtSelection = new List&lt;DateTime>();                 dtSelection.Add(dtCurrentDate);                  while (dtCurrentDate &lt;= EndDate)                 {                     switch (Repeat.ToUpper())                     {                         case "EVERY":                             GenerateDates(1, RepeatTime);                             break;                         case "EVERYOTHER":                             GenerateDates(2, RepeatTime);                             break;                         case "EVERYTHIRD":                             GenerateDates(3, RepeatTime);                             break;                         case "EVERYFOURTH":                             GenerateDates(4, RepeatTime);                             break;                     }                 }                 if (dtSelection != null &amp;&amp; dtSelection.Count > 0)                 {                     foreach (var dt in dtSelection)                     {                         if (dt &lt;= EndDate)                             calSelected.SelectedDates.Add(dt);                     }                 }              }             else if (rdoRepeatedOn.Checked &amp;&amp; val)             {                  int WeekNo = Convert.ToInt32(drpWeekNo.SelectedValue);                 string DayName = drpDays.SelectedValue;                 int every_nthMonth =  Convert.ToInt32(drpMonth.SelectedValue);                 int DayNo = 0;                 string tempDayName = "";                 dtSelection = new List&lt;DateTime>();                  DateTime dtCalcDate = new  DateTime(dtCurrentDate.Year,dtCurrentDate.Month,dtCurrentDate.Day);                                   while (dtCurrentDate &lt;= EndDate)                 {                     tempDayName = dtCurrentDate.DayOfWeek.ToString();                     DayNo = dtCurrentDate.Day;                      switch (WeekNo)                     {                         case 1:                             if (DayNo >= 1 &amp;&amp; DayNo &lt;= 7 &amp;&amp; tempDayName ==  DayName)                             {                                 dtSelection.Add(dtCurrentDate);                                 dtCurrentDate = dtCalcDate =  dtCalcDate.AddMonths(every_nthMonth);                             }                             break;                         case 2:                             if (DayNo >= 8 &amp;&amp; DayNo &lt;= 14 &amp;&amp; tempDayName ==  DayName)                             {                                 dtSelection.Add(dtCurrentDate);                                 dtCurrentDate = dtCalcDate =  dtCalcDate.AddMonths(every_nthMonth);                             }                             break;                         case 3:                             if (DayNo >= 15 &amp;&amp; DayNo &lt;= 21 &amp;&amp; tempDayName  == DayName)                             {                                 dtSelection.Add(dtCurrentDate);                                 dtCurrentDate = dtCalcDate =  dtCalcDate.AddMonths(every_nthMonth);                             }                             break;                         case 4:                             if (DayNo >= 22 &amp;&amp; DayNo &lt;= 28 &amp;&amp; tempDayName  == DayName)                             {                                 dtSelection.Add(dtCurrentDate);                                dtCurrentDate= dtCalcDate =  dtCalcDate.AddMonths(every_nthMonth);                             }                             break;                     }                      dtCurrentDate = dtCurrentDate.AddDays(1);                       //nthDay = ((Convert.ToInt16(dtCurrentDate.Day) % 7) ==  0 ? (Convert.ToInt16(dtCurrentDate.Day) / 7) :  (Convert.ToInt16(dtCurrentDate.Day) / 7) + 1);                      //if (dtCurrentDate.ToString("dddd") == WeekdayName &amp;&amp;  nthDay == WeekDayNo)                     //{                      //    if (every_nthMonth == 2)                     //    {                     //        dtCurrentDate = dtCurrentDate.AddMonths(2);                     //    }                     //    if (every_nthMonth == 3)                     //    {                     //        dtCurrentDate = dtCurrentDate.AddMonths(2);                     //    }                     //    if (every_nthMonth == 6)                     //    {                     //        dtCurrentDate = dtCurrentDate.AddMonths(2);                     //    }                     //    if (every_nthMonth == 12)                     //    {                     //        dtCurrentDate = dtCurrentDate.AddMonths(2);                     //    }                     //}                     //dtCurrentDate = dtCurrentDate.AddDays(1);                 }             }         }     }       public void GenerateDates(int num, string RepeatTime = "")     {         switch (RepeatTime.ToUpper())         {             case "DAY":                 dtCurrentDate = dtCurrentDate.AddDays(1 * num);                 dtSelection.Add(dtCurrentDate);                 break;             case "WEEK":                 dtCurrentDate = dtCurrentDate.AddDays(7 * num);                 dtSelection.Add(dtCurrentDate);                 break;             case "MONTH":                 dtCurrentDate = dtCurrentDate.AddMonths(1 * num);                 dtSelection.Add(dtCurrentDate);                 break;             case "YEAR":                 dtCurrentDate = dtCurrentDate.AddYears(1 * num);                 dtSelection.Add(dtCurrentDate);                 break;         }     }      public void GenerateCalender(DateTime startDate, DateTime endDate)     {      }      protected void calStartDate_SelectionChanged(object sender, EventArgs e)     {         txtStartDate.Text = calStartDate.SelectedDate.ToShortDateString();     }     protected void calEndDate_SelectionChanged(object sender, EventArgs e)     {         txtEndDate.Text = calEndDate.SelectedDate.ToShortDateString();     }        protected void calStartDate_DayRender(object sender, DayRenderEventArgs  e)     {      }     protected void calEndDate_DayRender(object sender, DayRenderEventArgs e)     {      }      protected void calSelected_SelectionChanged(object sender, EventArgs e)     {         if (dtSelection != null &amp;&amp; dtSelection.Count > 0)         {             foreach (var dt in dtSelection)             {                 calSelected.SelectedDates.Add(dt);             }         }     }    }  &lt;center>     &lt;table style="width:800px;">         &lt;tr>             &lt;td>start date&lt;/td>             &lt;td>&lt;asp:TextBox ID="txtStartDate" runat="server">&lt;/asp:TextBox>                                  &lt;asp:Calendar ID="calStartDate" runat="server"  OnDayRender="calStartDate_DayRender"  OnSelectionChanged="calStartDate_SelectionChanged">&lt;/asp:Calendar>&lt;/td>         &lt;/tr>         &lt;tr>             &lt;td>end date&lt;/td>             &lt;td>&lt;asp:TextBox ID="txtEndDate"  runat="server">&lt;/asp:TextBox>&lt;asp:Calendar ID="calEndDate" runat="server"  OnDayRender="calEndDate_DayRender"  OnSelectionChanged="calEndDate_SelectionChanged">&lt;/asp:Calendar>&lt;/td>         &lt;/tr>         &lt;tr>             &lt;td>&lt;asp:RadioButton ID="rdoRepeat" runat="server"  Text="Repeat" GroupName="A" />&lt;/td>             &lt;td>&lt;/td>         &lt;/tr>         &lt;tr>             &lt;td>&lt;asp:DropDownList ID="drpRepeat" runat="server">                 &lt;asp:ListItem Text="Every" Value="Every">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Every Other"  Value="EveryOther">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Every Third"  Value="EveryThird">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Every Fourth"  Value="EveryFourth">&lt;/asp:ListItem>                 &lt;/asp:DropDownList>&lt;/td>             &lt;td>&lt;asp:DropDownList ID="drpRepeatTime" runat="server">                 &lt;asp:ListItem Text="Day" Value="Day">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Week" Value="Week">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Month" Value="Month">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Year" Value="Year">&lt;/asp:ListItem>                  &lt;/asp:DropDownList>&lt;/td>         &lt;/tr>         &lt;tr>             &lt;td>&lt;asp:RadioButton ID="rdoRepeatedOn" runat="server"  Text="Repeated On" GroupName="A" />&lt;/td>             &lt;td>&lt;/td>         &lt;/tr>         &lt;tr>             &lt;td>&lt;asp:DropDownList ID="drpWeekNo" runat="server">                 &lt;asp:ListItem Text="First" Value="1">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Second" Value="2">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Third" Value="3">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Fourth" Value="4">&lt;/asp:ListItem>                  &lt;/asp:DropDownList>&lt;/td>             &lt;td>&lt;asp:DropDownList ID="drpDays" runat="server">                 &lt;asp:ListItem Text="Sunday" Value="Sunday">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Monday" Value="Monday">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Tuesday" Value="Tuesday">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Wednesday"  Value="Wednesday">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Thursday"  Value="Thursday">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Friday" Value="Friday">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="saturday"  Value="saturday">&lt;/asp:ListItem>                  &lt;/asp:DropDownList>&lt;/td>         &lt;/tr>         &lt;tr>             &lt;td>&lt;asp:DropDownList ID="drpMonth" runat="server">                 &lt;asp:ListItem Text="Month" Value="1">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="3 Month" Value="3">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="6 Month" Value="6">&lt;/asp:ListItem>                 &lt;asp:ListItem Text="Year" Value="12">&lt;/asp:ListItem>                  &lt;/asp:DropDownList>&lt;/td>             &lt;td>&lt;asp:Button ID="btnSubmit" runat="server" Text="Submit"  OnClick="btnSubmit_Click">&lt;/asp:Button>&lt;/td>         &lt;/tr>     &lt;/table> &lt;/center>     &lt;asp:Calendar ID="calSelected" runat="server"  OnSelectionChanged="calSelected_SelectionChanged" Enabled="false"  >&lt;/asp:Calendar>
